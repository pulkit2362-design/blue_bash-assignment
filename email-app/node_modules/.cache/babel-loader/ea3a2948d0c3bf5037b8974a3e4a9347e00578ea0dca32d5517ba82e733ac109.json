{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import UserSwitcher from\"./Components/userSwitcher\";import NavigationButtons from\"./Components/navigationButtons\";import Inbox from\"./Components/inbox\";import ComposeEmail from\"./Components/composeEmail\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const users={Jenny:\"jenny@2025\",John:\"john@2024\"};const EmailApp=()=>{const[currentUser,setCurrentUser]=useState(null);const[emails,setEmails]=useState(()=>{const savedEmails=localStorage.getItem(\"emails\");return savedEmails?JSON.parse(savedEmails):{Jenny:[],John:[]};});const[notifications,setNotifications]=useState({Jenny:0,John:0});const[selectedEmail,setSelectedEmail]=useState(null);const[view,setView]=useState(null);const[selectedUser,setSelectedUser]=useState(null);const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");useEffect(()=>{localStorage.setItem(\"emails\",JSON.stringify(emails));},[emails]);const sendEmail=(to,from,subject,body)=>{const newEmail={from,to,subject,body,unread:true,starred:false};setEmails(prev=>({...prev,[to]:[newEmail,...prev[to]]}));// Add new email at the top\nsetNotifications(prev=>({...prev,[to]:prev[to]+1}));};const deleteEmail=index=>{setEmails(prev=>({...prev,[currentUser]:prev[currentUser].filter((_,i)=>i!==index)}));setSelectedEmail(null);};const toggleStar=index=>{setEmails(prev=>{const updatedEmails=[...prev[currentUser]];updatedEmails[index].starred=!updatedEmails[index].starred;return{...prev,[currentUser]:updatedEmails};});};const handleLogin=()=>{if(users[selectedUser]===password){setCurrentUser(selectedUser);setNotifications(prev=>({...prev,[selectedUser]:0}));setSelectedEmail(null);setView(\"inbox\");setError(\"\");}else{setError(\"Incorrect password. Please try again.\");}};const handleLogout=()=>{setCurrentUser(null);setSelectedUser(null);setPassword(\"\");setView(null);};if(!currentUser){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Hey! Which account do you want to log in?\"}),!selectedUser?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(UserSwitcher,{users:Object.keys(users),currentUser:currentUser,openInbox:setCurrentUser,notifications:notifications})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Enter password for \",selectedUser]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mb-2\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter password\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success m-2\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary m-2\",onClick:()=>setSelectedUser(null),children:\"Back\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center mb-4\",children:[\"Hey \",currentUser,\"!\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsx(NavigationButtons,{setView:setView}),view===\"inbox\"&&/*#__PURE__*/_jsx(Inbox,{emails:emails[currentUser],openEmail:index=>{const updatedEmails=[...emails[currentUser]];updatedEmails[index].unread=false;setEmails(prev=>({...prev,[currentUser]:updatedEmails}));setSelectedEmail(updatedEmails[index]);},deleteEmail:deleteEmail,toggleStar:toggleStar,selectedEmail:selectedEmail}),view===\"compose\"&&/*#__PURE__*/_jsx(ComposeEmail,{onSendEmail:sendEmail,users:Object.keys(users),currentUser:currentUser})]});};export default EmailApp;","map":{"version":3,"names":["React","useState","useEffect","UserSwitcher","NavigationButtons","Inbox","ComposeEmail","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","users","Jenny","John","EmailApp","currentUser","setCurrentUser","emails","setEmails","savedEmails","localStorage","getItem","JSON","parse","notifications","setNotifications","selectedEmail","setSelectedEmail","view","setView","selectedUser","setSelectedUser","password","setPassword","error","setError","setItem","stringify","sendEmail","to","from","subject","body","newEmail","unread","starred","prev","deleteEmail","index","filter","_","i","toggleStar","updatedEmails","handleLogin","handleLogout","className","children","Object","keys","openInbox","type","value","onChange","e","target","placeholder","onClick","openEmail","onSendEmail"],"sources":["/Users/pulkitanand/Downloads/blue_bash/micro-frontend-app/email-app/src/EmailApp.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport UserSwitcher from \"./Components/userSwitcher\";\nimport NavigationButtons from \"./Components/navigationButtons\";\nimport Inbox from \"./Components/inbox\";\nimport ComposeEmail from \"./Components/composeEmail\";\n\nconst users = {\n  Jenny: \"jenny@2025\",\n  John: \"john@2024\",\n};\n\nconst EmailApp = () => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [emails, setEmails] = useState(() => {\n    const savedEmails = localStorage.getItem(\"emails\");\n    return savedEmails ? JSON.parse(savedEmails) : { Jenny: [], John: [] };\n  });\n\n  const [notifications, setNotifications] = useState({ Jenny: 0, John: 0 });\n  const [selectedEmail, setSelectedEmail] = useState(null);\n  const [view, setView] = useState(null);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    localStorage.setItem(\"emails\", JSON.stringify(emails));\n  }, [emails]);\n\n  const sendEmail = (to, from, subject, body) => {\n    const newEmail = { from, to, subject, body, unread: true, starred: false };\n    setEmails((prev) => ({ ...prev, [to]: [newEmail, ...prev[to]] })); // Add new email at the top\n    setNotifications((prev) => ({ ...prev, [to]: prev[to] + 1 }));\n  };\n\n  const deleteEmail = (index) => {\n    setEmails((prev) => ({\n      ...prev,\n      [currentUser]: prev[currentUser].filter((_, i) => i !== index),\n    }));\n    setSelectedEmail(null);\n  };\n\n  const toggleStar = (index) => {\n    setEmails((prev) => {\n      const updatedEmails = [...prev[currentUser]];\n      updatedEmails[index].starred = !updatedEmails[index].starred;\n      return { ...prev, [currentUser]: updatedEmails };\n    });\n  };\n\n  const handleLogin = () => {\n    if (users[selectedUser] === password) {\n      setCurrentUser(selectedUser);\n      setNotifications((prev) => ({ ...prev, [selectedUser]: 0 }));\n      setSelectedEmail(null);\n      setView(\"inbox\");\n      setError(\"\");\n    } else {\n      setError(\"Incorrect password. Please try again.\");\n    }\n  };\n\n  const handleLogout = () => {\n    setCurrentUser(null);\n    setSelectedUser(null);\n    setPassword(\"\");\n    setView(null);\n  };\n\n  if (!currentUser) {\n    return (\n      <div className=\"container mt-4 text-center\">\n        <h2>Hey! Which account do you want to log in?</h2>\n        {!selectedUser ? (\n          <>\n            <UserSwitcher\n              users={Object.keys(users)}\n              currentUser={currentUser}\n              openInbox={setCurrentUser}\n              notifications={notifications}\n            />\n          </>\n        ) : (\n          <div>\n            <h3>Enter password for {selectedUser}</h3>\n            <input\n              type=\"password\"\n              className=\"form-control mb-2\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Enter password\"\n            />\n            {error && <p className=\"text-danger\">{error}</p>}\n            <button className=\"btn btn-success m-2\" onClick={handleLogin}>\n              Login\n            </button>\n            <button\n              className=\"btn btn-secondary m-2\"\n              onClick={() => setSelectedUser(null)}\n            >\n              Back\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"d-flex justify-content-between align-items-center\">\n        <h2 className=\"text-center mb-4\">Hey {currentUser}!</h2>\n        <button className=\"btn btn-danger\" onClick={handleLogout}>\n          Logout\n        </button>\n      </div>\n      <NavigationButtons setView={setView} />\n      {view === \"inbox\" && (\n        <Inbox\n          emails={emails[currentUser]}\n          openEmail={(index) => {\n            const updatedEmails = [...emails[currentUser]];\n            updatedEmails[index].unread = false;\n            setEmails((prev) => ({ ...prev, [currentUser]: updatedEmails }));\n            setSelectedEmail(updatedEmails[index]);\n          }}\n          deleteEmail={deleteEmail}\n          toggleStar={toggleStar}\n          selectedEmail={selectedEmail}\n        />\n      )}\n      {view === \"compose\" && (\n        <ComposeEmail\n          onSendEmail={sendEmail}\n          users={Object.keys(users)}\n          currentUser={currentUser}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default EmailApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}